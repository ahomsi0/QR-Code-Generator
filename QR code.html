<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>QR Code Generator</title>

    <style>
      * {
        box-sizing: border-box;
        font-family: system-ui, -apple-system, "Segoe UI", sans-serif;
      }

      body {
        margin: 0;
        height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        background: #0f172a;
        color: #e5e7eb;
      }

      .card {
        background: #020617;
        border-radius: 16px;
        padding: 24px 28px;
        width: 420px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.6);
        border: 1px solid #1f2937;
      }

      h1 {
        margin: 0 0 6px;
        text-align: center;
        font-size: 1.4rem;
      }

      .subtitle {
        color: #94a3b8;
        text-align: center;
        margin-bottom: 18px;
        font-size: 0.85rem;
      }

      textarea {
        width: 100%;
        min-height: 70px;
        padding: 10px 12px;
        border-radius: 10px;
        border: 1px solid #374151;
        background: #020617;
        color: #e5e7eb;
        resize: vertical;
        font-size: 0.9rem;
        outline: none;
      }

      textarea:focus {
        border-color: #38bdf8;
        box-shadow: 0 0 0 1px rgba(56, 189, 248, 0.4);
      }

      .controls {
        margin-top: 12px;
        display: flex;
        gap: 8px;
      }

      button {
        flex: 1;
        padding: 10px;
        border-radius: 999px;
        border: none;
        font-size: 0.9rem;
        font-weight: 600;
        cursor: pointer;
        transition: 0.15s;
      }

      button:active {
        transform: scale(0.96);
      }

      .btn-generate {
        background: #22c55e;
        color: #022c22;
      }

      .btn-clear {
        background: #111827;
        border: 1px solid #4b5563;
        color: #e5e7eb;
      }

      .btn-download {
        background: #0ea5e9;
        color: white;
      }

      .qr-box {
        margin-top: 20px;
        background: #020617;
        border: 1px dashed #374151;
        border-radius: 14px;
        padding: 16px;
        display: flex;
        height: 230px;
        align-items: center;
        justify-content: center;
      }

      #qrcode {
        display: none;
      }

      .placeholder {
        color: #6b7280;
        text-align: center;
        font-size: 0.85rem;
      }

      .tip {
        text-align: center;
        margin-top: 10px;
        font-size: 0.75rem;
        color: #94a3b8;
      }

      .mode-selector {
        display: flex;
        gap: 8px;
        margin-bottom: 16px;
      }

      .mode-btn {
        flex: 1;
        padding: 8px 12px;
        border-radius: 8px;
        border: 1px solid #374151;
        background: #111827;
        color: #94a3b8;
        font-size: 0.85rem;
        cursor: pointer;
        transition: 0.15s;
      }

      .mode-btn.active {
        background: #38bdf8;
        color: #022c22;
        border-color: #38bdf8;
      }

      .mode-btn:hover {
        border-color: #4b5563;
      }

      .mode-content {
        margin-bottom: 0;
      }

      .wifi-input {
        width: 100%;
        padding: 10px 12px;
        border-radius: 10px;
        border: 1px solid #374151;
        background: #020617;
        color: #e5e7eb;
        font-size: 0.9rem;
        outline: none;
        margin-bottom: 10px;
      }

      .wifi-input:focus {
        border-color: #38bdf8;
        box-shadow: 0 0 0 1px rgba(56, 189, 248, 0.4);
      }

      .wifi-checkbox {
        display: flex;
        align-items: center;
        gap: 8px;
        color: #e5e7eb;
        font-size: 0.9rem;
        cursor: pointer;
        margin-top: 4px;
      }

      .wifi-checkbox input[type="checkbox"] {
        width: 18px;
        height: 18px;
        cursor: pointer;
        accent-color: #38bdf8;
      }

      .password-wrapper {
        position: relative;
        margin-bottom: 10px;
      }

      .password-wrapper .wifi-input {
        margin-bottom: 0;
        padding-right: 45px;
      }

      .password-toggle {
        position: absolute;
        right: 8px;
        top: 50%;
        transform: translateY(-50%);
        background: transparent;
        border: none;
        color: #94a3b8;
        cursor: pointer;
        font-size: 1.1rem;
        padding: 4px 8px;
        border-radius: 6px;
        transition: 0.15s;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .password-toggle:hover {
        background: #1f2937;
        color: #e5e7eb;
      }

      .password-toggle:active {
        transform: translateY(-50%) scale(0.95);
      }
    </style>
  </head>
  <body>
    <div class="card">
      <h1>QR Code Generator</h1>
      <p class="subtitle">
        Generate QR codes for text, URLs, or WiFi networks.
      </p>

      <div class="mode-selector">
        <button class="mode-btn active" data-mode="text">Text/URL</button>
        <button class="mode-btn" data-mode="wifi">WiFi</button>
      </div>

      <div id="textMode" class="mode-content">
        <textarea id="qrText" placeholder="https://example.com"></textarea>
      </div>

      <div id="wifiMode" class="mode-content" style="display: none">
        <input
          type="text"
          id="wifiSSID"
          placeholder="Network Name (SSID)"
          class="wifi-input"
        />
        <div class="password-wrapper">
          <input
            type="password"
            id="wifiPassword"
            placeholder="Password"
            class="wifi-input"
          />
          <button type="button" class="password-toggle" id="passwordToggle">
            Show
          </button>
        </div>
        <select id="wifiSecurity" class="wifi-input">
          <option value="WPA">WPA/WPA2</option>
          <option value="WEP">WEP</option>
          <option value="nopass">No Password</option>
        </select>
        <label class="wifi-checkbox">
          <input type="checkbox" id="wifiHidden" />
          Hidden Network
        </label>
      </div>

      <div class="controls">
        <button class="btn-generate" id="generateBtn">Generate</button>
        <button class="btn-clear" id="clearBtn">Clear</button>
      </div>

      <button
        class="btn-download"
        id="downloadBtn"
        style="margin-top: 10px; width: 100%; display: none"
      >
        Download PNG
      </button>

      <div class="qr-box">
        <div id="qrcode"></div>
        <div class="placeholder" id="placeholder">
          Your QR code will appear here.
        </div>
      </div>

      <p class="tip">
        Tip: Press <b>Ctrl + Enter</b> to generate. Scan WiFi QR codes with your
        phone camera to connect automatically.
      </p>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

    <script>
      const input = document.getElementById("qrText");
      const qrContainer = document.getElementById("qrcode");
      const placeholder = document.getElementById("placeholder");
      const downloadBtn = document.getElementById("downloadBtn");
      const textMode = document.getElementById("textMode");
      const wifiMode = document.getElementById("wifiMode");
      const modeButtons = document.querySelectorAll(".mode-btn");
      let currentMode = "text";

      const qr = new QRCode(qrContainer, {
        width: 220,
        height: 220,
        correctLevel: QRCode.CorrectLevel.H,
      });

      modeButtons.forEach((btn) => {
        btn.addEventListener("click", () => {
          const mode = btn.dataset.mode;
          currentMode = mode;

          modeButtons.forEach((b) => b.classList.remove("active"));
          btn.classList.add("active");

          if (mode === "text") {
            textMode.style.display = "block";
            wifiMode.style.display = "none";
          } else {
            textMode.style.display = "none";
            wifiMode.style.display = "block";
          }
        });
      });

      function generateQR() {
        let qrData = "";

        if (currentMode === "text") {
          qrData = input.value.trim();
          if (!qrData) {
            alert("Please enter text or URL.");
            return;
          }
        } else {
          // WiFi mode
          const ssid = document.getElementById("wifiSSID").value.trim();
          const password = document.getElementById("wifiPassword").value;
          const security = document.getElementById("wifiSecurity").value;
          const hidden = document.getElementById("wifiHidden").checked;

          if (!ssid) {
            alert("Please enter WiFi network name (SSID).");
            return;
          }

          // Format: WIFI:T:WPA;S:NetworkName;P:Password;H:false;;
          qrData = `WIFI:T:${security};S:${ssid};P:${password};H:${hidden};;`;
        }

        qr.clear();
        qr.makeCode(qrData);

        qrContainer.style.display = "block";
        placeholder.style.display = "none";
        downloadBtn.style.display = "block";
      }

      function clearQR() {
        if (currentMode === "text") {
          input.value = "";
        } else {
          document.getElementById("wifiSSID").value = "";
          document.getElementById("wifiPassword").value = "";
          document.getElementById("wifiSecurity").value = "WPA";
          document.getElementById("wifiHidden").checked = false;
        }
        qr.clear();
        qrContainer.style.display = "none";
        placeholder.style.display = "block";
        downloadBtn.style.display = "none";
      }

      function downloadQR() {
        const img =
          qrContainer.querySelector("img") ||
          qrContainer.querySelector("canvas");
        if (!img) return;

        const link = document.createElement("a");
        link.download = "qr-code.png";
        link.href = img.src || img.toDataURL("image/png");
        link.click();
      }

      document.getElementById("generateBtn").onclick = generateQR;
      document.getElementById("clearBtn").onclick = clearQR;
      downloadBtn.onclick = downloadQR;

      input.addEventListener("keydown", (e) => {
        if (e.key === "Enter" && (e.ctrlKey || e.metaKey)) {
          e.preventDefault();
          generateQR();
        }
      });

      // Ctrl+Enter shortcut for WiFi inputs and dropdown
      const wifiInputs = document.querySelectorAll(
        "#wifiSSID, #wifiPassword, #wifiSecurity"
      );
      wifiInputs.forEach((inp) => {
        inp.addEventListener("keydown", (e) => {
          if (e.key === "Enter" && (e.ctrlKey || e.metaKey)) {
            e.preventDefault();
            generateQR();
          }
        });
      });

      const passwordInput = document.getElementById("wifiPassword");
      const passwordToggle = document.getElementById("passwordToggle");

      passwordToggle.addEventListener("click", () => {
        const type =
          passwordInput.getAttribute("type") === "password"
            ? "text"
            : "password";
        passwordInput.setAttribute("type", type);
        passwordToggle.textContent = type === "password" ? "Show" : "Hide";
      });
    </script>
  </body>
</html>
